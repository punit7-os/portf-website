{% extends "shop/base.html" %}
{% load i18n form_tags static %}

{% block title %}Change password - My Shoppings{% endblock %}

{% block content %}
<article class="auth-card" role="main" aria-labelledby="change-pass-title">
  <h1 id="change-pass-title" class="auth-title">Change password</h1>
  <p class="auth-sub">Choose a strong password. Don't reuse a password you use elsewhere.</p>

  {% include "account/messages.html" %}

  {# show non-field errors (token invalid, link expired etc) #}
  {% if form.non_field_errors %}
    <div class="alert alert-error" role="alert" style="margin-bottom:12px;">
      {{ form.non_field_errors|join:" " }}
    </div>
  {% endif %}

  <form method="post" action="" novalidate>
    {% csrf_token %}

    {% for field in form.visible_fields %}
      <div class="form-row">
        <label class="form-label" for="{{ field.id_for_label }}">{{ field.label }}</label>

        {# add_class will add our .input-full styling; works for password fields too #}
        {{ field|add_class:"input-full" }}

        {% if field.help_text %}
          <small style="display:block;color:var(--muted);margin-top:6px;">{{ field.help_text|safe }}</small>
        {% endif %}

        {% if field.errors %}
          <div class="alert alert-error" role="alert" style="margin-top:8px;">
            {{ field.errors|join:", " }}
          </div>
        {% endif %}
      </div>
    {% endfor %}

    <div class="form-row" style="margin-top:6px;">
      <button type="submit" class="btn" style="width:100%;">Change password</button>
    </div>

    <div style="text-align:center;margin-top:12px;color:var(--muted);">
      <a href="{% url 'account_login' %}">Back to sign in</a>
    </div>
  </form>
</article>
{% endblock %}
