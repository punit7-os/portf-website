{% load static %}

<style>
/* üîç SEARCH GRID ‚Äî FIXED LAYOUT */
.product-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 220px));
  gap: 18px;
  justify-content: center;   /* üîí prevents stretch */
}

/* üß± CARD ‚Äî FIXED SIZE */
.product-card {
  background: #fff;
  border-radius: 14px;
  box-shadow: 0 4px 14px rgba(0,0,0,0.08);
  overflow: hidden;
  transition: transform 0.25s ease, box-shadow 0.25s ease;

  width: 220px;
  height: 300px;

  display: flex;
  flex-direction: column;
  position: relative;
}

.product-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 22px rgba(0,0,0,0.12);
}

/* üñº IMAGE */
.product-card img {
  width: 100%;
  height: 160px;
  object-fit: contain;
  background: #f7f7f7;
}

/* ‚ù§Ô∏è WISHLIST HEART */
.wishlist-heart {
  position: absolute;
  top: 10px;
  right: 10px;
  font-size: 22px;
  cursor: pointer;
  color: #ccc;
  transition: 0.2s;
  z-index: 2;
}

.wishlist-heart.active {
  color: #e11d48;
}

.wishlist-heart:hover {
  transform: scale(1.15);
}

/* üìÑ CONTENT */
.product-card-content {
  padding: 10px 12px;
  text-align: center;
  flex: 1;

  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

/* üè∑ NAME ‚Äî FIXED HEIGHT */
.product-card h4 {
  font-size: 14px;
  font-weight: 600;
  margin: 6px 0;
  color: #222;
  line-height: 1.3;

  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;

  min-height: 36px;
}

/* üí∞ PRICE ‚Äî NO UNDERLINE */
.product-card p {
  color: #007BFF;
  font-weight: 700;
  margin: 4px 0 0;
  text-decoration: none !important;
}

/* üö´ REMOVE ALL LINK UNDERLINES */
.product-card a {
  text-decoration: none !important;
  color: inherit;
}

/* ‚ú® SEARCH HIGHLIGHT */
.highlight {
  background: #ffe58f;
  padding: 0 3px;
  border-radius: 4px;
}

/* üì± MOBILE */
@media (max-width: 480px) {
  .product-grid {
    grid-template-columns: repeat(2, 1fr);
    justify-content: center;
  }

  .product-card {
    width: 100%;
    height: 280px;
  }

  .product-card img {
    height: 140px;
  }
}
</style>

<div class="product-grid">
  {% for product in products %}
    <div class="product-card">

      <!-- ‚ù§Ô∏è Wishlist -->
      <span
        class="wishlist-heart {% if product.id in wishlist_ids %}active{% endif %}"
        data-product="{{ product.id }}"
        title="Add to wishlist"
      >‚ô•</span>

      <a href="{% url 'shop:product_detail' product.slug %}">
        {% if product.image_url %}
          <img src="{{ product.image_url }}" alt="{{ product.name }}">
        {% endif %}

        <div class="product-card-content">
          <h4 class="product-name">{{ product.name }}</h4>
          <p>‚Çπ{{ product.price }}</p>
        </div>
      </a>
    </div>
  {% empty %}
    <p style="text-align:center;width:100%;">No products found.</p>
  {% endfor %}
</div>
